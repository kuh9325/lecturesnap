<div class="container">
    
    <form style="margin-top: 40px" action="/home/write" method="POST">
        <div class="form-group">
            <label for="exampleInputEmail1">제목</label>
            <input type="text" name="title" class="form-control" id="posttitle1" placeholder="제목">
        </div>
        <div class="form-group">
            <label for="comment">내용</label>
            <textarea class="form-control" rows="5" id="content" name="content"></textarea>
        </div>
        <button type="submit" class="btn btn-default">게시</button>
    </form>
    
    <% @posts.each do |p| %>
        <div class="well">
            <span style="font-weight :bold;"><%= p.title %></span><br> 
            <%= p.content %>
            <% p.comments.each do |r| %>
                <p><%= r.content %></p>
            <% end %>
            <input type="text" name="comment" class="form-control" id="content_<%= p.id %>" placeholder="댓글 입력">
            <button value="<%= p.id %>" type="submit" class="btn btn-default comment_submit">댓글 달기</button>
        </div>
    <% end %>
     
</div>

<script>
$('.comment_submit').click(function(){
    post_id1 = this.value; 
    post_content = $("#content_" + post_id1).val();
    
    $.ajax
    ({
        method: "POST",
        url: "/home/comment_write", 
        data: { comment: post_content , post_id: post_id1 }
    })
    .done(function(msg)){
        alert("댓글달렸다~");
    }); 
});
</script>